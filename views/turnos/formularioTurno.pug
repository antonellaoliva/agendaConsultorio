extends ../layout.pug

block content
   
    form(action="/turnos/registrar" method="POST")
      h2 Registrar Turno

      label(for="nombre") Nombre del Paciente
      input(type="text" name="nombre" required)

      label(for="dni") DNI del Paciente
      input(type="text" name="dni" required)

      label(for="motivo_consulta") Motivo de Consulta (opcional)
      input(type="text" name="motivo_consulta")

      label(for="obra_social") Obra Social
      input(type="text" name="obra_social")

      label(for="datos_contacto") Datos de Contacto
      input(type="text" name="datos_contacto" required)

      
      label(for="profesional_id") Profesional
      select(name="profesional_id" required)
        option(value="") Selecciona un Profesional
        each profesional in profesionales 
          option(value=profesional.id) #{profesional.nombre} #{profesional.apellido}

      label(for="especialidad_id") Especialidad
      select(name="especialidad_id" required)
        option(value="") Selecciona una Especialidad
        each especialidad in especialidades  
          option(value=especialidad.id) #{especialidad.nombre}

      label(for="fecha") Fecha
      input(type="date" name="fecha" required)

      label(for="hora") Hora
      input(type="time" name="hora" required)

      button(type="submit") Registrar Turno

    //- hr

    //- //- Formulario para buscar horarios disponibles
    //- form(action="/api/turnos/horarios-disponibles" method="GET")
    //-   h2 Buscar Horarios Disponibles

    //-   label(for="profesional_id") Profesional
    //-   select(name="profesional_id")
    //-     option(value="") Todos los Profesionales
    //-     each profesional in profesionales
    //-       option(value=profesional.id) #{profesional.nombre} #{profesional.apellido}

    //-   label(for="especialidad_id") Especialidad
    //-   select(name="especialidad_id")
    //-     option(value="") Todas las Especialidades
    //-     each especialidad in especialidades
    //-       option(value=especialidad.id) #{especialidad.nombre}

    //-   label(for="fecha") Fecha
    //-   input(type="date" name="fecha")

    //-   button(type="submit") Buscar

    //- if horarios
    //-   h3 Horarios Disponibles
    //-   ul
    //-     each horario in horarios
    //-       li #{horario.fecha} - #{horario.hora}

    //- hr

    //- //- Formulario de filtro de turnos programados
    //- form(action="/api/turnos/filtrar" method="GET")
    //-   h2 Filtrar Turnos Programados

    //-   label(for="estado_turno_id") Estado del Turno
    //-   select(name="estado_turno_id")
    //-     option(value="") Todos los Estados
    //-     each estado in estados_turno  // Asumiendo que env√≠as 'estados_turno' al renderizar la vista
    //-       option(value=estado.id) #{estado.descripcion}

    //-   label(for="fecha") Fecha
    //-   input(type="date" name="fecha")

    //-   button(type="submit") Filtrar Turnos

    //- if turnos
    //-   h3 Resultados de Turnos Filtrados
    //-   table
    //-     thead
    //-       tr
    //-         th Paciente
    //-         th Profesional
    //-         th Especialidad
    //-         th Fecha
    //-         th Hora
    //-         th Estado
    //-     tbody
    //-       each turno in turnos
    //-         tr
    //-           td #{turno.paciente.nombre} #{turno.paciente.apellido}
    //-           td #{turno.profesional.nombre} #{turno.profesional.apellido}
    //-           td #{turno.especialidad}
    //-           td #{turno.fecha}
    //-           td #{turno.hora}
    //-           td #{turno.estado.descripcion}
